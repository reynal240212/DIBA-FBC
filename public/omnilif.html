<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jersey 3D con Texturas Reales</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

    <style>
        /* --- IMÁGENES DE TEXTURA EN BASE64 --- */
        :root {
            /* He convertido tu kit.png y shorts.png a Base64 */
            --kit-texture: url(data:image/png;base64,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);
            --shorts-texture: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACYSURBVHhe7cEBDQAAAMKg909tDwcFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4XwAASQE24tM4iwAAAABJRU5ErkJggg==); /* Tu shorts.png era casi todo transparente */
            --short-color: #032a13; /* Color verde oscuro de la parte inferior de kit.png */
        }
        
        body {
            background-color: #e9ecef;
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
            color: #343a40;
        }
        
        .instructions {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* --- ESCENA 3D --- */
        .scene {
            width: 350px;
            height: 600px;
            perspective: 2000px;
            cursor: grab;
        }
        
        .model-container {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(-10deg) rotateY(-25deg); /* Vista inicial */
            transition: transform 0.1s linear;
        }
        
        .jersey, .shorts {
            position: absolute;
            width: 100%;
            transform-style: preserve-3d;
        }
        
        .jersey {
            height: 400px;
            top: 0;
        }

        .shorts {
            height: 200px;
            top: 380px; /* Posicionado debajo de la camiseta */
            transform: translateZ(-2px); /* Un poco atrás para que no se solape mal */
        }

        .face {
            position: absolute;
            backface-visibility: hidden;
            background-size: 512px 256px; /* Tamaño del mapa de textura original */
            background-repeat: no-repeat;
        }

        /* --- MAPEO DE TEXTURA PARA LA CAMISETA --- */
        .jersey .face {
            background-image: var(--kit-texture);
        }
        
        /* CUERPO */
        .jersey-body {
            width: 250px;
            height: 100%;
            position: absolute;
            left: 50px;
            transform-style: preserve-3d;
        }

        .jersey-body .front {
            width: 100%; height: 100%;
            transform: translateZ(20px);
            background-position: -128px 0;
        }
        .jersey-body .back {
            width: 100%; height: 100%;
            transform: rotateY(180deg) translateZ(20px);
            background-position: -384px 0;
        }

        /* MANGAS */
        .sleeve {
            width: 180px;
            height: 160px;
            position: absolute;
            top: 0;
            transform-style: preserve-3d;
        }
        .sleeve.left {
            left: -50px;
            transform: rotateZ(20deg) rotateY(-15deg);
        }
        .sleeve.right {
            right: -50px;
            transform: rotateZ(-20deg) rotateY(15deg);
        }
        .sleeve .front {
            width: 100%; height: 100%;
            transform: translateZ(15px);
        }
        .sleeve.left .front  { background-position: 0px -50px; }
        .sleeve.right .front { background-position: -256px -50px; }

        .sleeve .back {
            width: 100%; height: 100%;
            transform: rotateY(180deg) translateZ(15px);
        }
        .sleeve.left .back  { background-position: -100px -50px; } /* Estimado */
        .sleeve.right .back { background-position: -356px -50px; } /* Estimado */


        /* --- MAPEO DE TEXTURA PARA LOS SHORTS --- */
        .shorts-body {
            width: 260px;
            height: 100%;
            position: absolute;
            left: 45px;
            transform-style: preserve-3d;
        }
        .shorts .face {
            /* Usamos el color sólido del kit porque shorts.png es transparente */
            background-image: none;
            background-color: var(--short-color);
        }

        .shorts-body .front {
            width: 100%; height: 100%;
            transform: translateZ(15px);
        }
        .shorts-body .back {
            width: 100%; height: 100%;
            transform: rotateY(180deg) translateZ(15px);
        }
        
        /* Contenido de la espalda para nombre y número */
        .back-content {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 60px;
            height: 100%;
            color: #e8e8e8; /* Color de settings.json */
            font-family: 'Anton', sans-serif;
        }
        .player-name { font-size: 32px; }
        .player-number { font-size: 130px; line-height: 1; }

    </style>
</head>
<body class="d-flex flex-column align-items-center justify-content-center vh-100">

    <div class="instructions text-center mb-4">
        <h5>Kit 3D con Texturas Reales</h5>
        <p class="mb-0"><strong>Instrucciones:</strong> Haz clic y arrastra para rotar el kit completo.</p>
    </div>

    <div class="scene">
        <div class="model-container" id="modelContainer">
            
            <!-- Estructura de la Camiseta -->
            <div class="jersey">
                <div class="jersey-body">
                    <div class="face front"></div>
                    <div class="face back">
                        <!-- Añadimos nombre y número en la espalda -->
                        <div class="back-content">
                            <div class="player-name">MUBLES JK</div>
                            <div class="player-number">24</div>
                        </div>
                    </div>
                </div>
                <div class="sleeve left">
                    <div class="face front"></div>
                    <div class="face back"></div>
                </div>
                <div class="sleeve right">
                    <div class="face front"></div>
                    <div class="face back"></div>
                </div>
            </div>

            <!-- Estructura de los Shorts -->
            <div class="shorts">
                <div class="shorts-body">
                    <div class="face front"></div>
                    <div class="face back"></div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const modelContainer = document.getElementById('modelContainer');
        const scene = document.querySelector('.scene');

        let isDragging = false;
        let previousX, previousY;
        let rotationX = -10; // Rotación inicial en X
        let rotationY = -25; // Rotación inicial en Y

        const startDrag = (clientX, clientY) => {
            isDragging = true;
            previousX = clientX;
            previousY = clientY;
            scene.style.cursor = 'grabbing';
        };

        const drag = (clientX, clientY) => {
            if (!isDragging) return;
            
            const deltaX = clientX - previousX;
            const deltaY = clientY - previousY;
            
            previousX = clientX;
            previousY = clientY;

            rotationY += deltaX * 0.5;
            rotationX -= deltaY * 0.5;
            
            // Limitar la rotación vertical para que no se dé la vuelta por completo
            rotationX = Math.max(-80, Math.min(80, rotationX)); 

            modelContainer.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
        };

        const endDrag = () => {
            isDragging = false;
            scene.style.cursor = 'grab';
        };

        // Eventos para el ratón
        scene.addEventListener('mousedown', (e) => startDrag(e.clientX, e.clientY));
        window.addEventListener('mousemove', (e) => drag(e.clientX, e.clientY));
        window.addEventListener('mouseup', endDrag);

        // Eventos para pantallas táctiles
        scene.addEventListener('touchstart', (e) => startDrag(e.touches[0].clientX, e.touches[0].clientY), { passive: true });
        window.addEventListener('touchmove', (e) => drag(e.touches[0].clientX, e.touches[0].clientY), { passive: true });
        window.addEventListener('touchend', endDrag);
    </script>

</body>
</html>