<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>DIBA FBC - Sistema de Gestión</title>
    <meta name="description" content="Sistema de gestión para el Deportivo Internacional de Barranquilla Atlántico FBC" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root{--primary-dark:#001b72;--primary:#003399;--primary-darker:#0b0281;--accent:#ffd700;--accent-dark:#e6c300;--white:#fff;--light-gray:#f4f4f4;--success:#198754;--danger:#dc3545;--warning:#ffc107;--bs-body-bg:var(--light-gray)}body{background-color:var(--bs-body-bg);font-family:'Arial',sans-serif;display:flex;flex-direction:column;min-height:100vh}.navbar,.card-header,.app-footer,.modal-header,.table th{background-color:var(--primary)!important;color:var(--white)}.btn-primary{background-color:var(--primary);border-color:var(--primary)}.btn-primary:hover{background-color:var(--primary-dark);border-color:var(--primary-dark)}.btn-success{background-color:var(--accent);color:var(--primary-dark)!important;border-color:var(--accent)}.btn-success:hover{background-color:var(--accent-dark);border-color:var(--accent-dark)}.btn-outline-primary{color:var(--primary);border-color:var(--primary)}.btn-outline-primary:hover{background-color:var(--primary);color:var(--white)}.login-container{max-width:420px;margin:5rem auto}.login-card{border-radius:12px;box-shadow:0 .5rem 1.5rem rgba(0,0,0,.1)}.login-header{border-radius:12px 12px 0 0;padding:2rem;background-color:var(--primary)}.login-header h2{font-family:'Dancing Script',cursive;font-size:2.8rem;color:var(--accent)}#adminApp{display:none;flex-direction:column;min-height:100vh}.sidebar{background-color:var(--primary-dark)}.sidebar .nav-link{color:rgba(255,255,255,.8)}.sidebar .nav-link:hover{background-color:var(--primary);color:var(--white)}.sidebar .nav-link.active{background-color:var(--primary-darker);color:var(--white);font-weight:700}.sidebar .nav-link i{width:20px;text-align:center;margin-right:10px}.content-wrapper{padding:2rem;flex:1}.stats-card{border-left:5px solid var(--primary);border-radius:8px;transition:transform .2s,box-shadow .2s}.stats-card:hover{transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.stats-card .icon{color:var(--primary);font-size:2.5rem}.stats-card.accent-card{border-left-color:var(--accent)}.stats-card.accent-card .icon{color:var(--accent)}.view{display:none}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,.7);z-index:1099;display:flex;align-items:center;justify-content:center}#planillaDetailsTable td{vertical-align:middle}.status-select-P{background-color:#d1e7dd;border-color:#a3cfbb}.status-select-A{background-color:#f8d7da;border-color:#f1aeb5}.status-select-E{background-color:#fff3cd;border-color:#ffe69c}
    </style>
</head>
<body>
    <!-- Overlay de Carga -->
    <div id="loading-overlay"><div class="spinner-border text-primary" role="status" style="width:3rem;height:3rem"><span class="visually-hidden">Cargando...</span></div></div>

    <!-- Contenedor de Notificaciones -->
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index:1100"><div id="appToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-header"><strong class="me-auto" id="toastTitle">Notificación</strong><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body" id="toastMessage"></div></div></div>

    <!-- Pantalla de Login -->
    <section id="loginPage" class="container"><div class="login-container"><div class="login-card card"><div class="login-header"><img src="https://diba-fbc.vercel.app/images/ESCUDO.png" alt="DIBA FBC Logo" class="mb-3" style="max-width:100px"><h2>DIBA FBC</h2></div><div class="card-body p-4 p-md-5"><h4 class="card-title text-center mb-4">Iniciar Sesión</h4><form id="loginForm"><div class="mb-3"><label for="email" class="form-label">Correo Electrónico</label><input type="email" class="form-control" id="email" required></div><div class="mb-3"><label for="password" class="form-label">Contraseña</label><input type="password" class="form-control" id="password" required></div><div class="d-grid mt-4"><button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-sign-in-alt me-2"></i> Entrar</button></div></form></div></div></div></section>

    <!-- Aplicación Principal -->
    <main id="adminApp"><div class="d-flex w-100 h-100"><div class="sidebar d-flex flex-column p-3"><a class="navbar-brand d-flex align-items-center text-white mb-4" href="#"><img src="https://diba-fbc.vercel.app/images/ESCUDO.png" alt="DIBA FBC Logo" class="me-2" style="max-height:40px"><span class="fs-5">DIBA FBC</span></a><ul class="nav nav-pills flex-column mb-auto"><li class="nav-item"><a class="nav-link" href="#" data-view="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li><li class="nav-item"><a class="nav-link" href="#" data-view="players"><i class="fas fa-users"></i> Jugadores</a></li><li class="nav-item"><a class="nav-link" href="#" data-view="planillas"><i class="fas fa-clipboard-list"></i> Planillas</a></li></ul><hr class="text-white"><button class="btn btn-danger" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión</button></div>
        <!-- Contenido Principal -->
        <div class="content-wrapper">
            <div id="dashboard-view" class="view">
                <!-- El contenido se generará desde JS -->
            </div>
            <div id="players-view" class="view"></div>
            <div id="planillas-view" class="view"></div>
            <div id="planilla-detail-view" class="view"></div>
        </div>
    </div></main>
    
    <!-- Modal: Añadir/Editar Jugador -->
    <div class="modal fade" id="playerModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="playerModalLabel"></h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><form id="playerForm"><div class="modal-body"><input type="hidden" id="playerId"><div class="mb-3"><label for="playerName" class="form-label">Nombre del Jugador</label><input type="text" class="form-control" id="playerName" required></div><div class="mb-3"><label for="playerCategory" class="form-label">Categoría</label><select class="form-select" id="playerCategory" required><option value="">Seleccione...</option><option value="2012/2013">2012/2013</option><option value="2014/15/16">2014/15/16</option></select></div><div class="mb-3"><label for="playerStatus" class="form-label">Estado</label><select class="form-select" id="playerStatus" required><option value="Activo">Activo</option><option value="Inactivo">Inactivo</option></select></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="submit" class="btn btn-primary">Guardar</button></div></form></div></div></div>

    <!-- Modal: Crear Nueva Planilla -->
    <div class="modal fade" id="planillaModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Crear Nueva Planilla</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><form id="planillaForm"><div class="modal-body"><div class="mb-3"><label for="planillaDate" class="form-label">Fecha</label><input type="date" class="form-control" id="planillaDate" required></div><div class="mb-3"><label for="planillaCategoryCreate" class="form-label">Categoría</label><select class="form-select" id="planillaCategoryCreate" required><option value="">Seleccione...</option><option value="2012/2013">2012/2013</option><option value="2014/15/16">2014/15/16</option></select></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="submit" class="btn btn-primary">Crear Planilla</button></div></form></div></div></div>
    
    <!-- Scripts JS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>