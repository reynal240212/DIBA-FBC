<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Rifa DIBA FBC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Estilos personalizados -->
  <style>
    :root {
      --azul: #001f63;        /* Azul oscuro */
      --amarillo: #FFD700;     /* Amarillo dorado */
      --fondo: #ffffff;
      --fondo-gris: #f4f4f4;
    }
    
    body {
      background-color: var(--fondo-gris);
      color: var(--azul);
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    
    header {
      background: var(--azul);
      color: var(--amarillo);
      text-align: center;
      padding: 1rem;
      font-weight: bold;
      text-transform: uppercase;
      font-size: 1.2rem;
    }
    
    .btn-container {
      text-align: center;
      margin: 1rem 0;
    }
    
    .page {
      width: 21cm;  /* Tamaño A4 portrait */
      min-height: 29.7cm;
      padding: 1cm;
      margin: 0 auto;
      background: var(--fondo);
      page-break-after: always;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-around;
    }
    
    .boleta {
      width: 100%;
      max-width: 100%;
      height: 5.6cm; /* Ajustado para 5 boletas por hoja (5 x 5.6cm ≅ 28cm) */
      background: var(--amarillo);
      border: 2px solid var(--azul);
      border-radius: 8px;
      padding: 0.6cm;
      margin: 0.3cm 0;
      box-sizing: border-box;
      position: relative;
    }
    
    .boleta .logo {
      width: 1.5cm;
      position: absolute;
      top: 0.3cm;
      right: 0.3cm;
    }
    
    .boleta .titulo {
      font-weight: bold;
      text-align: center;
      font-size: 1.1rem;
      margin: 0.2cm 0;
      color: var(--azul);
    }
    
    .boleta .info {
      text-align: center;
      font-size: 0.9rem;
      color: var(--azul);
    }
    
    .boleta .numeros {
      margin-top: 0.3cm;
      display: flex;
      justify-content: center;
      gap: 0.3cm;
    }
    
    .boleta .numero {
      background: var(--fondo);
      color: var(--azul);
      border: 1px solid var(--azul);
      border-radius: 4px;
      width: 1.5cm;
      height: 1.5cm;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 0.9rem;
    }
    
    .boleta .footer {
      position: absolute;
      bottom: 0.3cm;
      left: 0.3cm;
      font-weight: bold;
      font-size: 0.9rem;
      color: var(--azul);
    }
    
    /* Impresión: Ocultar botón de PDF */
    @media print {
      .btn-container { display: none; }
    }
  </style>
</head>
<body>

  <header style="background: linear-gradient(135deg, #001f63, #004d73); color: #FFD700; padding: 20px 10px; text-align: center; font-family: 'Segoe UI', sans-serif;">
    <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 10px;">RIFA PRO-FONDOS</h1>
    <p style="font-size: 1.2rem; margin-bottom: 5px;">Sábado 19 de Abril 2025 – Lotería El Sinuano</p>
    <p style="font-size: 1.1rem; margin-bottom: 5px;">Últimas 2 cifras – 10:00 PM</p>
    <p style="font-size: 1.1rem; font-style: italic;">Valor: $3000 cada número – Sorteo de 2 Perfumes para Caballeros</p>
  </header>
  

<div class="btn-container">
  <button id="btnPDF" class="btn btn-primary">Descargar PDF</button>
</div>

<div id="boletas-container"></div>

<!-- Librerías para PDF -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<script>
  // Configuración: 40 boletas, 5 boletas por página
  const totalBoletas = 40;
  const boletasPorPagina = 5;
  const contenedor = document.getElementById('boletas-container');
  
  // Función para generar números aleatorios entre 0 y 99, con 2 dígitos
  const generarNumeros = () => {
    let html = '';
    for (let i = 0; i < 6; i++) {
      const num = Math.floor(Math.random() * 100);
      html += `<div class="numero">${num.toString().padStart(2, '0')}</div>`;
    }
    return html;
  };
  
  // Generar boletas agrupadas en páginas
  let paginas = Math.ceil(totalBoletas / boletasPorPagina);
  for (let p = 0; p < paginas; p++) {
    let pageDiv = document.createElement('div');
    pageDiv.className = 'page';
    
    // Por cada página, agregar 5 boletas
    for (let i = 1; i <= boletasPorPagina; i++) {
      let numBoleta = p * boletasPorPagina + i;
      if (numBoleta > totalBoletas) break;
      let boletaDiv = document.createElement('div');
      boletaDiv.className = 'boleta';
      boletaDiv.innerHTML = `
       <div class="boleta shadow p-3 mb-3 bg-white rounded">
  <div class="d-flex justify-content-between align-items-center">
    <img src="images/ESCUDO.png" alt="Logo DIBA FBC" class="logo" style="max-width:60px;">
    <h2 class="titulo text-uppercase text-primary fw-bold mb-0">Responsable DIBA FBC</h2>
  </div>
  <div class="info mt-3 text-center">
    <p>Juega el sábado <strong>19/04/2025</strong></p>
    <p>Lotería El Sinuano – Noche</p>
    <p>Con las dos últimas cifras – 10:00 PM</p>
    <p>Sorteo de 2 Perfumes para Caballeros</p>
    <p class="fs-5 text-warning mt-2">Valor: $3000 cada número</p>
  </div>
  <div class="numeros d-flex justify-content-around mt-3">
    <!-- La función generarNumeros() debe retornar el contenido HTML de los 6 números -->
    ${generarNumeros()}
  </div>
  <div class="footer text-center mt-3">
    <small class="text-muted">Boleta #${numBoleta}</small>
  </div>
</div>

      `;
      pageDiv.appendChild(boletaDiv);
    }
    
    contenedor.appendChild(pageDiv);
  }
  
  // Función para generar PDF en formato A4 vertical (portrait)
  document.getElementById("btnPDF").addEventListener("click", async () => {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({ orientation: 'portrait', unit: 'cm', format: 'a4' });
    
    const pages = document.querySelectorAll('.page');
    for (let i = 0; i < pages.length; i++) {
      const canvas = await html2canvas(pages[i], { scale: 2 });
      const imgData = canvas.toDataURL("image/png");
      const imgProps = pdf.getImageProperties(imgData);
      const pdfWidth = pdf.internal.pageSize.getWidth();
      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
      if (i > 0) {
        pdf.addPage();
      }
      pdf.addImage(imgData, "PNG", 0, 0, pdfWidth, pdfHeight);
    }
    
    pdf.save("Rifa_DIBA_FBC.pdf");
  });
</script>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
